<mat-card *ngIf="project() as p" class="details-card">
  <h2 class="title">{{ p.title }}</h2>
  <p class="description">{{ p.description }}</p>

  <div class="tags">
    <span class="tag" *ngFor="let tag of p.tags">{{ tag }}</span>
  </div>

  <p class="author">By {{ p.createdBy.name }}</p>

  <button mat-raised-button color="primary" class="like-btn" (click)="toggleLike()">
    <span class="heart" [class.liked]="p.likedByMe">{{ p.likedByMe ? 'ğŸ’™' : 'ğŸ¤' }}</span>
    {{ p.likes }}
  </button>

  <!-- Comments Section -->
  <div class="comments-section">
    <h3>Comments ({{ p.comments?.length || 0 }})</h3>

    <div class="comment" *ngFor="let c of p.comments">
      <strong>{{ c.author }}</strong> <span class="date">{{ c.createdAt | date:'short' }}</span>
      <p>{{ c.text }}</p>
    </div>

    <div class="add-comment">
      <mat-form-field appearance="outline" class="comment-input">
        <input matInput placeholder="Write a comment..." [(ngModel)]="newCommentText">
      </mat-form-field>
      <button mat-raised-button color="accent" (click)="addComment()">Add</button>
    </div>
  </div>
</mat-card>
